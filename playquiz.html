<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Play Quiz - QuizHub</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<nav>
  <a href="global.html">Leave Quizzes</a>
</nav>

<div class="container">
  <h2 id="quizTitle"></h2>
  <form id="quizForm"></form>
  <button onclick="submitQuiz()">Submit Answers</button>
</div>

<script>
// Get selected quiz from localStorage
const quiz = JSON.parse(localStorage.getItem('currentQuiz'));

if (!quiz) {
  alert("No quiz selected!");
  window.location.href = 'global.html';
}

document.getElementById('quizTitle').innerText = quiz.title;

const form = document.getElementById('quizForm');

// Generate question inputs
quiz.questions.forEach((q, index) => {
  const div = document.createElement('div');
  div.classList.add('card');
  div.innerHTML = `
    <p>Q${index + 1}: ${q.question}</p>
    <input type="text" name="answer${index}" placeholder="Your Answer">
  `;
  form.appendChild(div);
});

// Submit answers and calculate score
function submitQuiz() {
  let score = 0;

  quiz.questions.forEach((q, index) => {
    const userAnswer = form['answer' + index].value.trim();
    const correctAnswer = q.answer.trim();
    if(userAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
      score++;
    }
  });

  alert(`You scored ${score} out of ${quiz.questions.length}`);
  window.location.href = 'global.html';
}
</script>
</body>
</html>
